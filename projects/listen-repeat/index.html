---
layout: default
title: Listen and Repeat
---

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://www.youtube.com/iframe_api"></script>

<style>
    body {
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
    }
    .container {
        text-align: center;
        background: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        max-width:700px;
        margin:0 auto;
    }
</style>

<h1>Listen and Repeat</h1>

<div class="container">
    <div id="score">Score: <span></span></div>
    <form>
        <input name="videoId" placeholder="Youtube VideoId" />
        <input type="submit" />
        <br /><br />
    </form>
    <div id="video-player"></div>
    </div>
</div>
<script>
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const videoId = urlParams.get('videoId');

    var player;
    var transcription;

    function onYouTubeIframeAPIReady() {
        player = new YT.Player('video-player', {
            height: '360',
            width: '100%',
            videoId: videoId,
            events: {
                'onReady': getTranscription()
            }
        });
    }

    function getTranscription() {
        $.get(`https://server-git-main-iacoposk8s-projects.vercel.app/transcript/${videoId}`, function(data) {
            if (data.error) {
                alert('Errore nel recupero della trascrizione: ' + data.error);
            } else {
                transcription = data;
                console.log(transcription);
            }
        });
    }
</script>